<!doctype html>
<html lang="id" data-theme-scope="modern">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Panel Admin Organisasi</title>
    <link rel="stylesheet" href="/forms-static/shared/theme/theme-tokens.css?v=20260220-1" />
    <link rel="stylesheet" href="/forms-static/shared/top-nav.css" />
    <link rel="stylesheet" href="/forms-static/admin/admin.css?v=20260217-2" />
  </head>
  <body>
    <nav class="global-nav">
      <div class="global-nav__inner">
        <a class="global-nav__brand" href="/forms">AITI Forms Portal</a>
        <a class="global-nav__link" href="/forms/admin/login">Admin Login</a>
        <a class="global-nav__link" href="/forms/admin/">Superadmin</a>
        <a class="global-nav__link is-hidden" data-nav-link="form" href="#">Form Publik</a>
        <a class="global-nav__link is-hidden" data-nav-link="panel" href="#">Panel Organisasi</a>
        <a class="global-nav__link is-hidden" data-nav-link="dashboard" href="#">Dashboard</a>
        <span class="global-nav__theme-slot" data-theme-toggle></span>
        <button class="global-nav__logout" type="button">Logout</button>
      </div>
    </nav>

    <main class="container tenant-admin-page builder-page">
      <section class="panel">
        <div class="section-head">
          <div>
            <h1 id="school-title">Panel Admin Organisasi</h1>
            <p id="user-info" class="small">Memuat data admin...</p>
          </div>
          <div class="row">
            <a href="/forms/admin/" class="ghost" style="padding: 9px 12px; border-radius: 8px; text-decoration: none"
              >Superadmin</a
            >
            <button id="logout-btn" class="secondary">Logout</button>
          </div>
        </div>
      </section>

      <section class="panel">
        <h2>Questionnaire Manager</h2>
        <p class="small">Buat dan kelola banyak kuesioner. Admin tidak perlu edit JSON langsung.</p>
        <div class="builder-form-grid">
          <label class="field">
            <span>Nama Kuesioner</span>
            <input id="questionnaire-name" placeholder="Contoh: Evaluasi Pelatihan Guru" />
          </label>
          <label class="field">
            <span>Slug Kuesioner</span>
            <input id="questionnaire-slug" placeholder="evaluasi-pelatihan-guru" />
          </label>
          <label class="field">
            <span>Kategori</span>
            <input id="questionnaire-category" placeholder="general_feedback" />
          </label>
          <button id="create-questionnaire-btn" type="button">Tambah Kuesioner</button>
        </div>
      </section>

      <section class="panel">
        <div class="section-head">
          <div>
            <h2>Daftar Kuesioner</h2>
            <p class="small">Akses builder visual, dashboard, dan form publik dari sini.</p>
          </div>
          <button id="refresh-questionnaires-btn" class="ghost" type="button">Muat Ulang</button>
        </div>
        <div class="table-wrap">
          <div class="table-scroll">
            <table>
              <thead>
                <tr>
                  <th>Nama</th>
                  <th>Slug</th>
                  <th>Kategori</th>
                  <th>Status</th>
                  <th>Total Respons</th>
                  <th>Aksi</th>
                </tr>
              </thead>
              <tbody id="questionnaire-list-body"></tbody>
            </table>
          </div>
        </div>
        <p id="questionnaire-empty" class="small" style="display: none">Belum ada kuesioner.</p>
      </section>

      <section class="panel" id="prompt-manager-section">
        <div class="section-head">
          <div>
            <h2>Prompt AI</h2>
            <p class="small">Kelola prompt scope organisasi atau per kuesioner.</p>
          </div>
        </div>
        <div class="builder-form-grid">
          <label class="field">
            <span>Mode</span>
            <select id="tenant-prompt-mode">
              <option value="internal">internal</option>
              <option value="external_pemerintah">external_pemerintah</option>
              <option value="external_mitra">external_mitra</option>
              <option value="live_guru">live_guru</option>
            </select>
          </label>
          <label class="field">
            <span>Scope</span>
            <select id="tenant-prompt-scope">
              <option value="tenant">tenant</option>
              <option value="questionnaire">questionnaire</option>
            </select>
          </label>
          <label class="field">
            <span>Kuesioner Scope</span>
            <select id="tenant-prompt-questionnaire"></select>
          </label>
          <button id="tenant-prompt-load-btn" type="button" class="ghost">Muat Prompt</button>
        </div>

        <label class="field field-block">
          <span>Draft Prompt</span>
          <textarea id="tenant-prompt-template"></textarea>
        </label>
        <label class="field field-block">
          <span>Catatan Perubahan</span>
          <input id="tenant-prompt-note" placeholder="Opsional catatan versi prompt" />
        </label>
        <div class="row">
          <button id="tenant-prompt-save-btn" type="button">Simpan Draft Prompt</button>
          <button id="tenant-prompt-publish-btn" type="button" class="secondary">Publikasikan Prompt</button>
        </div>
        <div class="status-panel" style="margin-top: 12px">
          <h3>Prompt Efektif</h3>
          <pre id="tenant-prompt-effective">Belum dimuat.</pre>
        </div>
      </section>

      <section class="panel" data-legacy-only="true">
        <details>
          <summary class="builder-advanced-summary">Mode Lanjutan / Compat Sekolah</summary>
          <p class="small">
            Fitur legacy tetap tersedia untuk transisi. Untuk operasional utama, gunakan Builder Visual dan Dashboard Generic.
          </p>
          <div class="row">
            <a id="legacy-dashboard-link" href="#" class="ghost" style="padding: 9px 12px; border-radius: 8px; text-decoration: none"
              >Buka Dashboard Legacy</a
            >
          </div>
        </details>
      </section>

      <section class="panel">
        <div class="status-panel">
          <h3>Status Panel</h3>
          <p id="status" class="status" aria-live="polite"></p>
          <details id="error-debug-wrap" class="status-debug-wrap" hidden>
            <summary>Detail error teknis</summary>
            <pre id="error-debug">Belum ada error.</pre>
          </details>
        </div>
        <div class="field-block">
          <h3 class="subsection-title">Aktivitas Terakhir</h3>
          <ul id="activity-feed" class="activity-feed"></ul>
        </div>
      </section>
    </main>

    <script type="module" src="/forms-static/shared/top-nav.js?v=20260217-3"></script>
    <script type="module" src="/forms-static/admin/school.js?v=20260217-3"></script>
  </body>
</html>
