<!doctype html>
<html lang="id" data-theme-scope="modern">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard Publik</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/forms-static/shared/theme/theme-tokens.css?v=20260220-1" />
    <link rel="stylesheet" href="/forms-static/shared/top-nav.css?v=20260220-3" />
    <link rel="stylesheet" href="/forms-static/forms/public-dashboard.css?v=20260220-1" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <nav class="global-nav" data-auth-state="guest" data-nav-open="false">
      <div class="global-nav__inner">
        <div class="global-nav__group global-nav__group--primary">
          <a class="global-nav__brand" href="/forms">AITI Forms Portal</a>
        </div>
        <button
          class="global-nav__menu-toggle"
          type="button"
          aria-label="Buka menu navigasi"
          aria-expanded="false"
          aria-controls="global-nav-drawer"
        >
          Menu
        </button>
        <div class="global-nav__drawer" id="global-nav-drawer">
          <div class="global-nav__group global-nav__group--context is-hidden">
            <a class="global-nav__link is-hidden" data-nav-link="form" href="#">Form Publik</a>
            <a class="global-nav__link is-hidden" data-nav-link="panel" href="#">Panel Organisasi</a>
            <a class="global-nav__link is-hidden" data-nav-link="dashboard" href="#">Dashboard</a>
          </div>
          <div class="global-nav__group global-nav__group--utility">
            <a class="global-nav__link global-nav__link--login" href="/forms/admin/login">Masuk Admin</a>
            <a class="global-nav__link global-nav__link--superadmin" href="/forms/admin/">Admin Utama</a>
            <span class="global-nav__theme-slot" data-theme-toggle></span>
            <button class="global-nav__logout is-hidden" type="button">Keluar</button>
          </div>
        </div>
      </div>
    </nav>

    <main class="public-dashboard-page">
      <section class="dashboard-hero panel">
        <p class="dashboard-kicker">Dashboard Publik</p>
        <h1 id="dashboard-title">Memuat dashboard...</h1>
        <p id="dashboard-subtitle">Data agregat organisasi sedang dimuat.</p>
        <div class="dashboard-actions">
          <a id="open-form-link" class="btn" href="#">Buka Form Publik</a>
          <a id="open-portal-link" class="btn ghost" href="/forms">Portal</a>
        </div>
      </section>

      <section class="panel">
        <p id="dashboard-status" class="status" aria-live="polite"></p>
        <details id="dashboard-error-debug-wrap" class="status-debug-wrap" hidden>
          <summary>Detail Teknis (Debug)</summary>
          <pre id="dashboard-error-debug">Belum ada error.</pre>
        </details>
      </section>

      <section id="insufficient-panel" class="panel insufficient-panel" hidden>
        <h2>Data Belum Cukup untuk Dipublikasi</h2>
        <p id="insufficient-message">
          Jumlah sampel masih di bawah ambang minimal untuk menjaga kualitas dan privasi data.
        </p>
      </section>

      <section id="content-panel" class="dashboard-content" hidden>
        <section class="panel metrics-grid">
          <article class="metric-card">
            <p>Total Respons</p>
            <h2 id="metric-total-responses">0</h2>
          </article>
          <article class="metric-card">
            <p>Respons Hari Ini</p>
            <h2 id="metric-responses-today">0</h2>
          </article>
          <article class="metric-card">
            <p>Rata-rata Skala</p>
            <h2 id="metric-avg-scale">0.00</h2>
          </article>
          <article class="metric-card">
            <p>Submit Terakhir</p>
            <h2 id="metric-last-submitted">-</h2>
          </article>
        </section>

        <section class="panel chart-grid">
          <article class="chart-card chart-card--wide">
            <h3>Tren Respons Harian</h3>
            <canvas id="trend-chart" height="170"></canvas>
          </article>
          <article class="chart-card">
            <h3>Rata-rata Kriteria</h3>
            <canvas id="criteria-chart" height="170"></canvas>
          </article>
          <article class="chart-card">
            <h3>Pertanyaan Skala Teratas</h3>
            <canvas id="scale-chart" height="170"></canvas>
          </article>
        </section>

        <section class="panel">
          <h3>Distribusi Pilihan (Top 8)</h3>
          <div class="table-wrap">
            <div class="table-scroll">
              <table class="distribution-table">
                <thead>
                  <tr>
                    <th>Pertanyaan</th>
                    <th>Bucket</th>
                    <th>Jumlah</th>
                  </tr>
                </thead>
                <tbody id="distribution-table-body"></tbody>
              </table>
            </div>
          </div>
        </section>
      </section>
    </main>

    <script type="module" src="/forms-static/shared/top-nav.js?v=20260220-3"></script>
    <script type="module" src="/forms-static/forms/public-dashboard.js?v=20260220-1"></script>
  </body>
</html>


