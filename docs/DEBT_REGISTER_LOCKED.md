# Debt Register Locked

Register ini menjadi sumber kebenaran tunggal untuk closure debt arsitektur. Item debt hanya boleh ditutup lewat bukti gate otomatis + proof command.

## State Machine

Transisi status yang sah:

`OPEN -> IN_PROGRESS -> READY_FOR_CLOSE -> CLOSED`

Aturan closure:

1. Status `CLOSED` hanya sah jika semua gate pada kolom `Gate Lock` PASS.
2. Status `CLOSED` wajib punya `Proof Commit`, `Proof Commands`, dan `Tanggal Tutup`.
3. Jika checker belum mengunci regresi, status maksimal `READY_FOR_CLOSE`.

## Locked Debt Items

| ID | Judul | Kategori | Severity | Owner | Scope Files | Gate Lock | Exit Criteria | Status | Proof Commit | Proof Commands | Tanggal Tutup |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| D01 | Budget blind spot coverage belum lengkap | Guardrail | High | Architecture | `src/lib/**/*.js`<br>`public/shared/dashboard-legacy/**/*.js`<br>`public/script.js` | `pnpm check:file-budgets`<br>`pnpm check:architecture` | Rule budget mencakup seluruh scope blind spot dan tidak ada growth di atas baseline | CLOSED | `603516979203de94f637c8bb89df053004b5c297` | `pnpm check:file-budgets` PASS<br>`pnpm check:architecture` PASS<br>`GitHub Actions #13` PASS (`check-architecture`, `smoke-e2e`, `smoke-dashboard-pdf`, `smoke-admin-ui`, `visual-regression-legacy-dashboard`) | 2026-02-19 |
| D02 | Duplikasi lifecycle form version (published/draft ensure) | Logic Duplication | High | Forms + DB Bootstrap | `src/modules/forms/repository.js`<br>`src/lib/db/bootstrap/legacy-sync.js` | `pnpm check:architecture`<br>`pnpm smoke:e2e` | Satu source-of-truth lifecycle dipakai kedua file dengan perilaku idempotent identik | CLOSED | `603516979203de94f637c8bb89df053004b5c297` | `pnpm check:architecture` PASS<br>`pnpm smoke:e2e` PASS<br>`pnpm smoke:e2e:full` PASS<br>`GitHub Actions #13` PASS (`check-architecture`, `smoke-e2e`, `smoke-dashboard-pdf`, `smoke-admin-ui`, `visual-regression-legacy-dashboard`) | 2026-02-19 |
| D03 | Duplikasi canonical util/constants | Duplication | High | Architecture + Shared Utilities | `slugify`, `escapeCsvValue`, `LEGACY_SCHOOL_SLUG`, `parseJson` declaration points | `pnpm check:duplication`<br>`pnpm check:architecture` | Deklarasi canonical sesuai policy, tidak ada deklarasi baru di luar allowlist/policy | CLOSED | `603516979203de94f637c8bb89df053004b5c297` | `pnpm check:duplication` PASS<br>`pnpm check:architecture` PASS<br>`GitHub Actions #13` PASS (`check-architecture`, `smoke-e2e`, `smoke-dashboard-pdf`, `smoke-admin-ui`, `visual-regression-legacy-dashboard`) | 2026-02-19 |
| D04 | Repetisi scope predicate pada ai-prompts repositories | Maintainability | Medium | AI Prompts | `src/modules/ai-prompts/repositories/read-repository.js`<br>`src/modules/ai-prompts/repositories/draft-repository.js`<br>`src/modules/ai-prompts/repositories/publish-repository.js` | `pnpm check:duplication`<br>`pnpm check:architecture`<br>`pnpm smoke:e2e`<br>`pnpm smoke:e2e:full` | Predicate builder tunggal dipakai semua query terkait tanpa perubahan semantics | CLOSED | `2c29e9c1e08e75031f4e6de9a5534c145fc952aa` | `pnpm check:duplication` PASS<br>`pnpm check:architecture` PASS<br>`pnpm smoke:e2e` PASS<br>`pnpm smoke:e2e:full` PASS<br>`GitHub Actions #11` PASS (`check-architecture`, `smoke-e2e`, `smoke-dashboard-pdf`, `smoke-admin-ui`, `visual-regression-legacy-dashboard`) | 2026-02-19 |
| D05 | Hotspot file backend over-budget tersisa | File Budget | Medium | Module Owners | `src/modules/questionnaires/repositories/version-repository.js`<br>`src/modules/forms/repository.js`<br>`src/modules/submissions/service.js`<br>`src/modules/auth/service.js` | `pnpm check:file-budgets`<br>`pnpm check:architecture`<br>`pnpm smoke:e2e` | Semua target D05 wajib <=220 dengan hard exact-path budget | CLOSED | `2c29e9c1e08e75031f4e6de9a5534c145fc952aa` | `pnpm check:file-budgets` PASS<br>`pnpm check:architecture` PASS<br>`pnpm smoke:e2e` PASS<br>`GitHub Actions #11` PASS (`check-architecture`, `smoke-e2e`, `smoke-dashboard-pdf`, `smoke-admin-ui`, `visual-regression-legacy-dashboard`) | 2026-02-19 |
| D06 | Checker belum mengunci dynamic import di module guardrails | Guardrail | High | Architecture Tooling | `scripts/check-modular-boundaries.js`<br>`scripts/check-module-cycles.js`<br>`scripts/report-module-deps.js` | `pnpm check:modularity`<br>`pnpm check:cycles`<br>`pnpm check:architecture` | Dynamic import literal terdeteksi checker, non-literal dynamic import di `src/modules/**` ditolak | CLOSED | `603516979203de94f637c8bb89df053004b5c297` | `pnpm check:modularity` PASS<br>`pnpm check:cycles` PASS<br>`pnpm check:architecture` PASS<br>`GitHub Actions #13` PASS (`check-architecture`, `smoke-e2e`, `smoke-dashboard-pdf`, `smoke-admin-ui`, `visual-regression-legacy-dashboard`) | 2026-02-19 |
| D07 | Grandfathered file-budget debt (6 file over-max via baseline freeze) | File Budget | High | Architecture + Module Owners | `src/lib/db/bootstrap/questionnaire-sync.js`<br>`src/lib/db/bootstrap/schema-ddl.js`<br>`public/script.js`<br>`public/shared/dashboard-legacy/pdf-renderer.js`<br>`public/shared/dashboard-legacy/charts.js`<br>`public/shared/dashboard-legacy/ai.js` | `pnpm check:file-budgets`<br>`pnpm check:architecture` | Enam file target turun <= hard max rule masing-masing; baseline exemption untuk enam path dihapus; tidak ada growth debt baru | CLOSED | `b7797ab06f6cba27454c1e4868f9cf454d0d7772` | `pnpm check:file-budgets` PASS<br>`pnpm check:architecture` PASS<br>`pnpm smoke:dashboard:pdf` PASS<br>`pnpm visual:legacy-dashboard:diff` PASS<br>`pnpm visual:questionnaire-dashboard:diff` PASS<br>`pnpm smoke:admin:ui` PASS<br>`GitHub check-runs` PASS (`check-architecture`, `smoke-e2e`, `smoke-dashboard-pdf`, `smoke-admin-ui`, `visual-regression-legacy-dashboard`) | 2026-02-19 |
| D08 | Duplikasi logic aktif: validation module identik 1:1 | Logic Duplication | Medium | Questionnaires + Submissions | `src/modules/questionnaires/validation.js`<br>`src/modules/submissions/validation.js` | `pnpm check:duplication`<br>`pnpm check:architecture`<br>`pnpm smoke:e2e` | Satu source canonical dipakai bersama; perilaku validasi identik; duplikasi file identik dihapus | CLOSED | `b7797ab06f6cba27454c1e4868f9cf454d0d7772` | `pnpm check:duplication` PASS<br>`pnpm check:architecture` PASS<br>`pnpm smoke:e2e` PASS<br>`GitHub check-runs` PASS (`check-architecture`, `smoke-e2e`, `smoke-dashboard-pdf`, `smoke-admin-ui`, `visual-regression-legacy-dashboard`) | 2026-02-19 |
| D09 | Loophole checker: `export ... from ...` belum diparse sebagai dependency | Guardrail | Medium | Architecture Tooling | `scripts/check-modular-boundaries.js`<br>`scripts/check-module-cycles.js`<br>`scripts/report-module-deps.js` | `pnpm check:modularity`<br>`pnpm check:cycles`<br>`pnpm check:architecture` | Checker dependency memproses `export ... from ...` (re-export) sehingga boundary/cycle tidak bisa dibypass | CLOSED | `b7797ab06f6cba27454c1e4868f9cf454d0d7772` | `pnpm check:modularity` PASS<br>`pnpm check:cycles` PASS<br>`pnpm check:architecture` PASS<br>`GitHub check-runs` PASS (`check-architecture`, `smoke-e2e`, `smoke-dashboard-pdf`, `smoke-admin-ui`, `visual-regression-legacy-dashboard`) | 2026-02-19 |
| D10 | Branch protection required checks belum terverifikasi objektif dari governance flow | Governance | Medium | Repo Admin + Architecture | Branch protection: `backup/wip-20260218-1746`, `main` | Manual/API verification + CI evidence<br>`pnpm check:architecture` | Required checks di GitHub branch protection terpasang sesuai policy; bukti screenshot/export/settings link atau API evidence terdokumentasi | CLOSED | `5bec9c71ff9a28a6013dbf1a87ad97236f571805` | `GET /branches/main/protection` 200<br>`GET /branches/backup/wip-20260218-1746/protection` 200<br>`required_status_checks.contexts` memuat 5 check wajib (`check-architecture`, `smoke-e2e`, `smoke-dashboard-pdf`, `smoke-admin-ui`, `visual-regression-legacy-dashboard`)<br>`pnpm check:architecture` PASS | 2026-02-19 |
